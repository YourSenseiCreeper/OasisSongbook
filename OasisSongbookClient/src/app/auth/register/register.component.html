<h2>
  Rejestracja
</h2>
<form 
  [formGroup]="registerForm"
  (ngSubmit)="submit()">
  <mat-form-field appearance="fill">
    <mat-icon 
      class="icon" 
      matPrefix>
      account_circle
    </mat-icon>
    <mat-label>
      Imię i nazwisko
    </mat-label>
    <input 
      autofocus
      matInput 
      type="text" 
      formControlName="name"
      required>
    <mat-error *ngIf="registerForm.controls['name'].invalid">
      {{ getErrorMessage('name') }}
    </mat-error>
  </mat-form-field>
  <mat-form-field appearance="fill">
    <mat-icon 
      class="icon" 
      matPrefix>
      email
    </mat-icon>
    <mat-label>
      Email
    </mat-label>
    <input 
      matInput 
      type="email" 
      formControlName="email"
      required>
    <mat-error *ngIf="registerForm.controls['email'].invalid">
      {{ getErrorMessage('email') }}
    </mat-error>
  </mat-form-field>
  <mat-form-field appearance="fill">
    <mat-icon 
      class="icon" 
      matPrefix>
      password
    </mat-icon>
    <mat-label>
      Hasło
    </mat-label>
    <input 
      matInput 
      [type]="hide ? 'password' : 'text'"
      formControlName="password"
      (input)="registerForm.controls['repeatPassword'].updateValueAndValidity()"
      required>
    <mat-error *ngIf="registerForm.controls['password'].invalid">
      {{ getErrorMessage('password') }}
    </mat-error>
    <button 
      type="button"
      mat-icon-button 
      matSuffix 
      (click)="hide = !hide" 
      [attr.aria-label]="'Ukryj hasło'" 
      [attr.aria-pressed]="hide">
      <mat-icon>
        {{hide ? 'visibility_off' : 'visibility'}}
      </mat-icon>
    </button>
  </mat-form-field>
  <mat-form-field appearance="fill">
    <mat-icon 
      class="icon" 
      matPrefix>
      password
    </mat-icon>
    <mat-label>
      Powtórz hasło
    </mat-label>
    <input 
      matInput 
      [type]="hide2 ? 'password' : 'text'"
      formControlName="repeatPassword"
      appConfirmEqualValidator="password"
      required>
    <mat-error *ngIf="registerForm.controls['repeatPassword'].invalid">
      {{ getErrorMessage('repeatPassword') }}
    </mat-error>
    <button 
      type="button"
      mat-icon-button 
      matSuffix 
      (click)="hide2 = !hide2" 
      [attr.aria-label]="'Ukryj hasło'" 
      [attr.aria-pressed]="hide2">
      <mat-icon>
        {{hide2 ? 'visibility_off' : 'visibility'}}
      </mat-icon>
    </button>
  </mat-form-field>
  <button 
    type="submit"
    class="submit"
    mat-stroked-button 
    color="primary"
    [disabled]="!registerForm.valid || submitDisabled">
    <div 
      *ngIf="!submitDisabled" 
      class="submit-text">
      <mat-icon class="icon">
        login
      </mat-icon>
      Zarejestruj się
    </div>
    <div 
      *ngIf="submitDisabled" 
      class="spinner">
      <mat-spinner [diameter]="22"></mat-spinner>
    </div>
  </button>
  <h4>
    Posiadasz już konto? 
    <a routerLink="/auth/login">
      Zaloguj się
    </a>
  </h4>
</form>